# **JavaScript Best Practice Guide**
---
### Как и у любого языка программирования, у JavaScript есть свой список лучших практик, помогающих создавать более простые для понимания и дальнейшей поддержки программы. В JavaScript есть множество ловушек, которые нужно уметь избегать. Следуя лучшим практикам JavaScript, мы делаем код более читаемым.
---
## **1. Избегайте глобальных переменных** :wink:
---

::: warning
*«Сведением количества глобальных переменных к одному, вы значительно снижаете шансы нежелательного взаимодействия с другими приложениями, виджетами или библиотеками.»
— Douglas Crockford*
:::

Глобальных переменных стоит избегать по нескольким причинам.
Во-первых, их легко переписать в различных местах кода, потому что они везде доступны. Во-вторых, они могут переписывать объект window, так как являются свойствами объекта `window`.
Две эти проблемы затрудняют восприятие кода. Следовательно, стоит определять локальные переменные настолько часто, насколько это возможно, используя ключевые слова `var`, `let` или `const`.
``` js
//Плохо
let firstNum = 2;
let secondNum = 1;

let sum = () => {
  firstNum + secondNum;
}

//Хорошо
let sum = () => {
  let firstNum = 2;
  let secondNum = 1;
  firstNum + secondNum;
}
```
## **2. Объявления сверху** :wink:
---

Хорошей практикой написания кода является размещение всех объявлений в начале каждого скрипта или функции.

Это:

+ Сделает чище код
+ Предоставит единственное место для поиска локальных переменных
+ Позволит избегать нежелательных (подразумеваемых) глобальных переменных
+ Уменьшит возможность нежелательных повторных объявлений

``` js
// Объявите в начале
let firstName, lastName, price, discount, fullPrice;

// Используйте после
firstName = "John";
lastName = "Doe";

price = 19.90;
discount = 0.10;

fullPrice = price * 100 / discount;
```

## **3. Используйте === Сравнение** :wink:
---

Оператор сравнения == всегда преобразует (в соответствующие типы) перед сравнением.

Оператор === вызывает сравнение значений и типа:
``` js
0 == "";        // true
1 == "1";       // true
1 == true;      // true

0 === "";       // false
1 === "1";      // false
1 === true;     // false
```

## **4. Никогда не объявляйте числовые (number), строковые (string) или логические (boolean) объекты** :wink:
---

Всегда обрабатывайте числа, строки или логические значения как примитивные значения. Но не как объекты.
Объявление этих типов как объектов замедляет скорость выполнения и вызывает неприятные побочные эффекты:
``` js
let x = "John";             
let y = new String("John");
(x === y) // является false, потому что x является строкой и y является объектом.
```

## **5.Использование тернарных операторов** :wink:
--- 

Используйте тернарные операторы. Это сокращает код:
``` js
//вместо этого
if (val) {
  return foo();
} else {
  return bar();
}

//можно записать так
return val ? foo() : bar();
```

## **6. Не объявляйте ненужные переменные** :wink:
---
Каждый раз, когда мы объявляем переменные, браузер должен резервировать пространство памяти для переменных. Поэтому, чтобы уменьшить использование памяти, мы должны объявлять как можно меньше переменных.
Например, если у нас есть следующий HTML:
``` js
<div id="foo">
  <p>

  </p>
</div>
```
И мы хотим установить текстовое содержимое элемента `p`, мы не должны писать что-то вроде:

``` js
const foo = document.querySelector('#foo');
const p = foo.querySelector('p');
p.textContent = 'foo';
```
Так как у нас есть 2 переменные. Это означает, что наш компьютер должен хранить значения еще для 2 переменных JavaScript.
Вместо этого мы можем сократить объявления переменных без записи, написав:
```js 
document.querySelector('#foo p').textContent = 'foo';
```
Как мы видим, мы можем использовать метод `querySelector` для выбора чего-либо с помощью CSS-селекторов. Это означает, что мы должны использовать этот метод и связанный `querySelectorAll` для выбора элементов, поскольку они оба могут использовать селекторы CSS для выбора любого узла элемента HTML.

## **7. Использование Switch** :wink:
---
Необходимо всегда завершать `switch` с помощью `default`. Даже если кажется, что в нем нет необходимости. Это позволяет иметь обходной сценарий на случай ошибки в коде.
```js
switch (new Date().getDay()) {
  case 0:
    day = "Sunday";
    break;
  case 1:
    day = "Monday";
    break;
  case 2:
    day = "Tuesday";
    break;
  case 3:
    day = "Wednesday";
    break;
  case 4:
    day = "Thursday";
    break;
  case 5:
    day = "Friday";
    break;
  case 6:
    day = "Saturday";
    break;
  default:
    day = "Unknown";
```

## **8. Неявное преобразование типов** :wink:
---

Избегайте неявного преобразования типов:
``` js
let x = "Hello";     //typeof x is a string
x = 5;               //changes typeof x to a number
```
Данная практика способна порождать ошибки в операциях:
``` js
let x = 5 + 7;       //x.valueOf() is 12,  typeof x is a number
let x = 5 + "7";     //x.valueOf() is 57,  typeof x is a string
let x = "5" + 7;     //x.valueOf() is 57,  typeof x is a string
let x = 5 - 7;       //x.valueOf() is -2,  typeof x is a number
let x = 5 - "7";     //x.valueOf() is -2,  typeof x is a number
let x = "5" - 7;     //x.valueOf() is -2,  typeof x is a number
let x = 5 - "x";     //x.valueOf() is NaN, typeof x is a number
```
Однажды объявленная переменная должна хранить один и тот же тип данных. При операциях, для того чтобы получить число, иной раз стоит явно преобразовать переменную к числу:
``` js
let foo = +bar % 5;
```

## **9. Инициализируйте переменные при их объявлении** :wink:
---
Инициализировать переменные и константы с объявленными значениями весьма хорошая идея. Это предотвращает ошибки неопределенных значений. Также удобно объявлять переменные или константы и задавать их начальные значения одной строкой.
В противном случае у нас будут отдельные строки для объявления и для значения.
Например, мы можем написать:
``` js
let x = 1,
  y = 1;
```
Чтобы объявить и `x`, и `y`. Это существенно короче, чем:
``` js
let x;
let y;
x = 1;
y = 1;
```
Мы можем объявлять и инициализировать несколько переменных, разделив каждое объявление и назначение запятыми.

## **10. Остерегайтесь автоматических преобразований типов** :wink:
---
Помните, что числа могут быть случайно преобразованы в строки или `NaN` (Not a Number / Не число).

JavaScript слабо типизирован. Переменная может содержать разные типы данных, а переменная может изменять свой тип данных:
``` js
let x = "Hello";     // по типу x является строкой
x = 5;               // изменение типа x на число
```
При выполнении математических операций `JavaScript` может преобразовывать числа в строки:
``` js
var x = 5 + 7;       // x.valueOf() является 12,  тип x является числом
var x = 5 + "7";     // x.valueOf() является 57,  тип x является строкой
var x = "5" + 7;     // x.valueOf() является 57,  тип x является строкой
var x = 5 - 7;       // x.valueOf() является -2,  тип x является числом
var x = 5 - "7";     // x.valueOf() является -2,  тип x является числом
var x = "5" - 7;     // x.valueOf() является -2,  тип x является числом
var x = 5 - "x";     // x.valueOf() является NaN, тип x является числом
```
Вычитание строки из строки не генерирует ошибку, но возвращает `NaN` (Not a Number):
``` js
"Hello" - "Dolly"    // возвращает NaN
```



